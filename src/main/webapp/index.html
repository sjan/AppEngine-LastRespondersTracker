<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript"> var routeCoordinates = [];var map;</script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      //load page content data
      //set page state
      $.ajax({
          type: "GET",
          dataType: "json",
          crossDomain:"true",
          url: "/rest/journey/plannedRoute",
          success: function(array){
            //now
            var daycount = 10;

            for(i = 0;i< array.length ; i++) {
              if(i === daycount) {
                 nowPosition = {lat : parseFloat(array[i].latitude), lng : parseFloat(array[i].longitude) };
              }
              routeCoordinates.push({lat : parseFloat(array[i].latitude), lng : parseFloat(array[i].longitude) });
            }
          //  console.log(JSON.stringify(routeCoordinates));

            var flightPath = new google.maps.Polyline({
              path: routeCoordinates,
              geodesic: true,
              strokeColor: '#686868',
              strokeOpacity: 070,
              strokeWeight: 4
            });
            flightPath.setMap(map);

            var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + 686868,
        new google.maps.Size(21, 34),
        new google.maps.Point(0,0),
        new google.maps.Point(10, 34));


            var marker = new google.maps.Marker({
              position: nowPosition,
              map: map,
              title: 'Hello World!',
              icon: pinImage
            });

          },
          error: function(data) {
            console.log("fail function " + JSON.stringify(data));
         }
     });
   }
 )
 </script>


</head>

  <body>
  	<div id="googleMap" style="width: 100%; height: 700px;"></div>
    <script>
      function initMap() {
        var mapProp = {
          center:new google.maps.LatLng(51.508742,-0.120850),
          zoom:5,
          mapTypeId:google.maps.MapTypeId.ROADMAP
        };
        map=new google.maps.Map(document.getElementById("googleMap"), mapProp);
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCciPUBCbLiRVE6Vf_TbVJrtVUSLvtSvuU&callback=initMap"></script>

  </body>
</html>
